# Cloudflare Pages / Workers configuration for LP Portal
# OpenNext adapter for Next.js on Cloudflare

name = "lp-portal-app"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# Main entry point (generated by OpenNext)
main = ".open-next/worker.js"

# Assets directory
[assets]
directory = ".open-next/assets"
binding = "ASSETS"

# Environment variables for production
[vars]
NODE_ENV = "production"
NEXTAUTH_URL = "https://lp-portal-app.ivygain.workers.dev"
NEXT_PUBLIC_APP_URL = "https://lp-portal-app.ivygain.workers.dev"
LARKBASE_APP_TOKEN = "EG7kb49Sqaijy7seo2vjYxIdp3f"
LARKBASE_TABLE_ID = "tbleuPP6QtZt3Dm8"
LARK_APP_ID = "cli_a9da5d0d8af8de1a"
LARK_APP_SECRET = "PZhfO1sv3vwLRsQQeDbdPbtJZWTz4Wgd"

# Build configuration
[build]
command = "npm run build:cloudflare"

# Development settings
[dev]
port = 8788
local_protocol = "http"

# KV Namespace for cache (optional)
# [[kv_namespaces]]
# binding = "CACHE"
# id = "your-kv-namespace-id"

# R2 bucket for large file storage (optional)
# [[r2_buckets]]
# binding = "STORAGE"
# bucket_name = "adreamfactory-storage"
